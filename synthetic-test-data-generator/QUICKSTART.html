<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SynthForge â€” Synthetic Test Data Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Source+Serif+4:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0e17;
            --bg-secondary: #111827;
            --bg-card: #151d2e;
            --bg-input: #0d1321;
            --border-subtle: #1e293b;
            --border-focus: #f59e0b;
            --border-section: #1a2332;
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --text-label: #cbd5e1;
            --accent: #f59e0b;
            --accent-dim: rgba(245,158,11,0.12);
            --accent-glow: rgba(245,158,11,0.25);
            --success: #34d399;
            --danger: #f87171;
            --code-bg: #0b1120;
            --tag-bg: rgba(245,158,11,0.08);
            --tag-border: rgba(245,158,11,0.25);
            --radius: 6px;
            --mono: 'JetBrains Mono', monospace;
            --serif: 'Source Serif 4', Georgia, serif;
        }

        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: var(--mono);
            font-size: 14px;
            line-height: 1.65;
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
        }

        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background:
                radial-gradient(ellipse at 20% 10%, rgba(245,158,11,0.04) 0%, transparent 55%),
                radial-gradient(ellipse at 80% 90%, rgba(59,130,246,0.03) 0%, transparent 55%);
            pointer-events: none;
            z-index: 0;
        }

        .page-wrapper {
            max-width: 820px;
            margin: 0 auto;
            padding: 48px 24px 80px;
            position: relative;
            z-index: 1;
        }

        /* === HEADER === */
        header {
            margin-bottom: 48px;
            padding-bottom: 32px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .domain-badge {
            display: inline-block;
            font-size: 10px;
            font-weight: 600;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: var(--accent);
            background: var(--accent-dim);
            border: 1px solid var(--tag-border);
            padding: 4px 10px;
            border-radius: 3px;
            margin-bottom: 16px;
        }

        h1 {
            font-size: 28px;
            font-weight: 700;
            letter-spacing: -0.02em;
            line-height: 1.3;
            margin-bottom: 8px;
        }

        h1 .accent { color: var(--accent); }

        .tagline {
            font-family: var(--serif);
            font-style: italic;
            font-size: 16px;
            color: var(--text-secondary);
            max-width: 600px;
            margin-bottom: 8px;
        }

        .author-line {
            font-size: 12px;
            color: var(--text-muted);
        }

        .author-line a {
            color: var(--accent);
            text-decoration: none;
        }

        .author-line a:hover { text-decoration: underline; }

        /* === INSTRUCTIONS BAR === */
        .instructions {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-left: 3px solid var(--accent);
            border-radius: var(--radius);
            padding: 16px 20px;
            margin-bottom: 40px;
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .instructions strong { color: var(--text-primary); }

        /* === FORM SECTIONS === */
        .section { margin-bottom: 40px; }

        .section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-section);
        }

        .section-num {
            width: 24px;
            height: 24px;
            background: var(--accent);
            color: var(--bg-primary);
            font-size: 12px;
            font-weight: 700;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .section-title {
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-label);
            flex: 1;
        }

        .badge-required {
            margin-left: auto;
            font-size: 10px;
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            padding: 2px 8px;
            border-radius: 3px;
            color: var(--accent);
            background: var(--accent-dim);
            border: 1px solid var(--tag-border);
        }

        .badge-optional {
            margin-left: auto;
            font-size: 10px;
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            padding: 2px 8px;
            border-radius: 3px;
            color: var(--text-muted);
            background: rgba(100,116,139,0.1);
            border: 1px solid rgba(100,116,139,0.2);
        }

        /* === FORMAT TAGS === */
        .format-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 10px;
        }

        .format-tag {
            font-size: 10px;
            color: var(--text-muted);
            background: rgba(100,116,139,0.08);
            border: 1px solid rgba(100,116,139,0.15);
            padding: 3px 8px;
            border-radius: 3px;
        }

        /* === FIELD CONTROLS === */
        .field-label {
            display: block;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-label);
            margin-bottom: 6px;
        }

        .field-hint {
            font-size: 11px;
            color: var(--text-muted);
            margin-bottom: 8px;
            line-height: 1.5;
        }

        textarea, input[type="text"], input[type="number"], select {
            width: 100%;
            padding: 10px 12px;
            background: var(--bg-input);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius);
            color: var(--text-primary);
            font-family: var(--mono);
            font-size: 13px;
            line-height: 1.55;
            transition: border-color 0.15s, box-shadow 0.15s;
        }

        textarea { resize: vertical; }

        textarea::placeholder, input::placeholder {
            color: var(--text-muted);
            font-size: 12px;
        }

        textarea:focus, input:focus, select:focus {
            outline: none;
            border-color: var(--border-focus);
            box-shadow: 0 0 0 3px var(--accent-glow);
        }

        .field-error-flash {
            border-color: var(--danger) !important;
            box-shadow: 0 0 0 3px rgba(248,113,113,0.25) !important;
        }

        select {
            appearance: none;
            cursor: pointer;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
            padding-right: 32px;
        }

        select option {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        /* === TWO-COLUMN GRID === */
        .field-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 520px) {
            .field-grid { grid-template-columns: 1fr; }
        }

        .field-group { display: flex; flex-direction: column; }

        /* === RADIO ROW === */
        .radio-row {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .radio-option { flex: 1; min-width: 100px; }

        .radio-option input { display: none; }

        .radio-option label {
            display: block;
            padding: 10px 14px;
            background: var(--bg-input);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius);
            cursor: pointer;
            text-align: center;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
            transition: all 0.15s;
        }

        .radio-option label:hover {
            border-color: var(--text-muted);
            color: var(--text-primary);
        }

        .radio-option input:checked + label {
            color: var(--bg-primary);
            background: var(--accent);
            border-color: var(--accent);
            font-weight: 600;
        }

        /* === CARD SELECTORS === */
        .card-selectors {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .card-selector { flex: 1; min-width: 180px; }

        .card-selector input { display: none; }

        .card-selector label {
            display: block;
            padding: 14px 16px;
            background: var(--bg-input);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.15s;
        }

        .card-selector label:hover { border-color: var(--text-muted); }

        .card-selector input:checked + label {
            border-color: var(--accent);
            background: var(--accent-dim);
        }

        .card-selector .card-title {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .card-selector input:checked + label .card-title {
            color: var(--accent);
        }

        .card-selector .card-desc {
            font-size: 11px;
            color: var(--text-muted);
            line-height: 1.45;
        }

        /* === ACTION BUTTONS === */
        .actions {
            margin-top: 40px;
            padding-top: 24px;
            border-top: 1px solid var(--border-subtle);
            display: flex;
            gap: 12px;
        }

        .btn-generate {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 28px;
            background: var(--accent);
            color: var(--bg-primary);
            font-family: var(--mono);
            font-weight: 700;
            font-size: 13px;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            transition: background 0.15s, transform 0.1s, box-shadow 0.15s;
        }

        .btn-generate:hover {
            background: #fbbf24;
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(245,158,11,0.3);
        }

        .btn-generate:active {
            transform: translateY(0);
        }

        .btn-generate svg { width: 15px; height: 15px; }

        .btn-reset {
            padding: 12px 20px;
            background: transparent;
            color: var(--text-muted);
            font-family: var(--mono);
            font-size: 12px;
            font-weight: 500;
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius);
            cursor: pointer;
            transition: color 0.15s, border-color 0.15s;
        }

        .btn-reset:hover {
            color: var(--text-secondary);
            border-color: var(--text-muted);
        }

        /* === OUTPUT PANEL === */
        .output-panel {
            display: none;
            margin-top: 48px;
        }

        .output-panel.visible {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .output-panel-inner {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius);
            overflow: hidden;
        }

        .output-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 20px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .output-title {
            font-size: 13px;
            font-weight: 600;
            color: var(--success);
            letter-spacing: 0.02em;
        }

        .btn-copy {
            padding: 6px 14px;
            background: var(--accent-dim);
            color: var(--accent);
            font-family: var(--mono);
            font-size: 11px;
            font-weight: 600;
            border: 1px solid rgba(245,158,11,0.2);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.15s;
        }

        .btn-copy:hover { background: rgba(245,158,11,0.2); }

        .btn-copy.copied {
            color: var(--success);
            border-color: var(--success);
            background: rgba(52,211,153,0.1);
        }

        .output-body pre {
            background: var(--code-bg);
            padding: 20px;
            font-family: var(--mono);
            font-size: 12px;
            line-height: 1.6;
            color: var(--text-primary);
            white-space: pre-wrap;
            word-break: break-word;
            max-height: 600px;
            overflow-y: auto;
            margin: 0;
        }

        /* === FOOTER === */
        footer {
            margin-top: 56px;
            padding-top: 20px;
            border-top: 1px solid var(--border-section);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 11px;
            color: var(--text-muted);
            flex-wrap: wrap;
            gap: 8px;
        }

        footer a {
            color: var(--accent);
            text-decoration: none;
        }

        footer a:hover { text-decoration: underline; }

        /* === SCROLLBAR === */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--border-subtle); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

        /* === RESPONSIVE === */
        @media (max-width: 520px) {
            .page-wrapper { padding: 32px 16px 60px; }
            h1 { font-size: 22px; }
            .card-selectors { flex-direction: column; }
            .card-selector { min-width: 100%; }
            .actions { flex-direction: column; }
            .btn-generate, .btn-reset { width: 100%; text-align: center; justify-content: center; }
            footer { flex-direction: column; text-align: center; }
        }
    </style>
</head>
<body>
    <div class="page-wrapper">

        <!-- HEADER -->
        <header>
            <div class="domain-badge">SDLC Automation &middot; QA &middot; DevOps</div>
            <h1><span class="accent">SynthForge</span> &mdash; Synthetic Test Data Generator</h1>
            <p class="tagline">Generate privacy-safe, schema-aware synthetic test datasets with referential integrity on demand.</p>
            <p class="author-line">Author: Tim Wolfe &mdash; <a href="https://github.com/rtwolfe" target="_blank" rel="noopener">GitHub</a> &middot; <a href="https://t.me/timwolfe" target="_blank" rel="noopener">Telegram</a></p>
        </header>

        <!-- INSTRUCTIONS BAR -->
        <div class="instructions">
            Fill in your schema and configuration below, then click <strong>Generate Prompt</strong> to produce a ready-to-paste prompt for any LLM. Only <strong>Schema</strong> and <strong>Output Format</strong> are required &mdash; all other fields have sensible defaults.
        </div>

        <!-- FORM -->
        <form id="synthForm" onsubmit="return false;">

            <!-- 1. Schema -->
            <div class="section">
                <div class="section-header">
                    <span class="section-num">1</span>
                    <span class="section-title">Schema</span>
                    <span class="badge-required">Required</span>
                </div>
                <div class="format-tags">
                    <span class="format-tag">SQL DDL</span>
                    <span class="format-tag">JSON Schema</span>
                    <span class="format-tag">OpenAPI</span>
                    <span class="format-tag">MongoDB</span>
                    <span class="format-tag">Plain English</span>
                </div>
                <label class="field-label" for="schema">Schema Definition</label>
                <p class="field-hint">Paste SQL DDL, JSON Schema, OpenAPI contract, MongoDB schema, or describe your data model in plain English.</p>
                <textarea id="schema" style="min-height:180px;font-family:var(--mono);" placeholder="CREATE TABLE customers (
  customer_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) NOT NULL UNIQUE,
  full_name VARCHAR(150) NOT NULL,
  date_of_birth DATE,
  membership_tier VARCHAR(20) CHECK (membership_tier IN ('free', 'silver', 'gold', 'platinum')),
  created_at TIMESTAMP NOT NULL DEFAULT NOW(),
  is_active BOOLEAN DEFAULT true
);

CREATE TABLE orders (
  order_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  customer_id UUID NOT NULL REFERENCES customers(customer_id),
  order_date TIMESTAMP NOT NULL,
  status VARCHAR(20) CHECK (status IN ('pending', 'processing', 'shipped', 'delivered', 'cancelled', 'refunded')),
  total_amount DECIMAL(10,2) NOT NULL CHECK (total_amount >= 0),
  shipping_address_country VARCHAR(3),
  notes TEXT
);

CREATE TABLE order_items (
  item_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  order_id UUID NOT NULL REFERENCES orders(order_id),
  product_name VARCHAR(200) NOT NULL,
  quantity INTEGER NOT NULL CHECK (quantity > 0),
  unit_price DECIMAL(10,2) NOT NULL CHECK (unit_price >= 0),
  discount_pct DECIMAL(5,2) DEFAULT 0 CHECK (discount_pct >= 0 AND discount_pct <= 100)
);"></textarea>
            </div>

            <!-- 2. Output Format -->
            <div class="section">
                <div class="section-header">
                    <span class="section-num">2</span>
                    <span class="section-title">Output Format</span>
                    <span class="badge-required">Required</span>
                </div>
                <div class="radio-row">
                    <div class="radio-option">
                        <input type="radio" name="outputFormat" id="fmt-sql" value="SQL INSERT" checked>
                        <label for="fmt-sql">SQL INSERT</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" name="outputFormat" id="fmt-json" value="JSON">
                        <label for="fmt-json">JSON</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" name="outputFormat" id="fmt-csv" value="CSV">
                        <label for="fmt-csv">CSV</label>
                    </div>
                </div>
            </div>

            <!-- 3 + 4. Volume & Domain Context (side-by-side) -->
            <div class="section">
                <div class="field-grid">
                    <!-- Volume -->
                    <div class="field-group">
                        <div class="section-header">
                            <span class="section-num">3</span>
                            <span class="section-title">Volume</span>
                            <span class="badge-optional">Optional</span>
                        </div>
                        <label class="field-label" for="volume">Record Count</label>
                        <p class="field-hint">Absolute counts (&lsquo;50 orders&rsquo;) or ratios (&lsquo;1 customer : 5 orders : 15 items&rsquo;). Default: 10 per table.</p>
                        <input type="text" id="volume" placeholder="10 per table">
                    </div>
                    <!-- Domain Context -->
                    <div class="field-group">
                        <div class="section-header">
                            <span class="section-num">4</span>
                            <span class="section-title">Domain Context</span>
                            <span class="badge-optional">Optional</span>
                        </div>
                        <label class="field-label" for="domain">Industry Vertical</label>
                        <p class="field-hint">Activates domain-specific generation patterns for realistic data.</p>
                        <select id="domain">
                            <option value="general" selected>General</option>
                            <option value="financial">Financial</option>
                            <option value="healthcare">Healthcare</option>
                            <option value="e-commerce">E-commerce</option>
                            <option value="SaaS">SaaS</option>
                            <option value="logistics">Logistics</option>
                            <option value="education">Education</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- 5. Edge Case Profile -->
            <div class="section">
                <div class="section-header">
                    <span class="section-num">5</span>
                    <span class="section-title">Edge Case Profile</span>
                    <span class="badge-optional">Optional</span>
                </div>
                <div class="card-selectors">
                    <div class="card-selector">
                        <input type="radio" name="edgeCase" id="edge-minimal" value="Minimal">
                        <label for="edge-minimal">
                            <div class="card-title">Minimal</div>
                            <div class="card-desc">Clean data only, no edge cases injected</div>
                        </label>
                    </div>
                    <div class="card-selector">
                        <input type="radio" name="edgeCase" id="edge-moderate" value="Moderate" checked>
                        <label for="edge-moderate">
                            <div class="card-title">Moderate</div>
                            <div class="card-desc">5&ndash;10% edge cases: nulls, boundary values, Unicode (default)</div>
                        </label>
                    </div>
                    <div class="card-selector">
                        <input type="radio" name="edgeCase" id="edge-aggressive" value="Aggressive">
                        <label for="edge-aggressive">
                            <div class="card-title">Aggressive</div>
                            <div class="card-desc">20&ndash;30% edge cases: nulls, boundaries, Unicode, special chars, extreme lengths</div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- 6 + 7. Locale & Deterministic Seed (side-by-side) -->
            <div class="section">
                <div class="field-grid">
                    <!-- Locale -->
                    <div class="field-group">
                        <div class="section-header">
                            <span class="section-num">6</span>
                            <span class="section-title">Locale</span>
                            <span class="badge-optional">Optional</span>
                        </div>
                        <label class="field-label" for="locale">Geographic Locale</label>
                        <p class="field-hint">Controls name, address, phone, and date formatting.</p>
                        <select id="locale">
                            <option value="en-US" selected>en-US</option>
                            <option value="en-GB">en-GB</option>
                            <option value="de-DE">de-DE</option>
                            <option value="fr-FR">fr-FR</option>
                            <option value="ja-JP">ja-JP</option>
                            <option value="pt-BR">pt-BR</option>
                            <option value="es-ES">es-ES</option>
                            <option value="zh-CN">zh-CN</option>
                            <option value="ko-KR">ko-KR</option>
                            <option value="ar-SA">ar-SA</option>
                        </select>
                    </div>
                    <!-- Deterministic Seed -->
                    <div class="field-group">
                        <div class="section-header">
                            <span class="section-num">7</span>
                            <span class="section-title">Deterministic Seed</span>
                            <span class="badge-optional">Optional</span>
                        </div>
                        <label class="field-label" for="detSeed">Seed Value</label>
                        <p class="field-hint">Integer seed for reproducible generation. Same seed = same output.</p>
                        <input type="number" id="detSeed" placeholder="42">
                    </div>
                </div>
            </div>

            <!-- 8. Seed Constraints -->
            <div class="section">
                <div class="section-header">
                    <span class="section-num">8</span>
                    <span class="section-title">Seed Constraints</span>
                    <span class="badge-optional">Optional</span>
                </div>
                <label class="field-label" for="seedConstraints">Required Data Conditions</label>
                <p class="field-hint">Specific values or conditions that must appear in the generated data.</p>
                <textarea id="seedConstraints" style="min-height:80px;" placeholder="Include at least one cancelled order with a refund, one customer with no orders..."></textarea>
            </div>

            <!-- 9. Exclusions -->
            <div class="section">
                <div class="section-header">
                    <span class="section-num">9</span>
                    <span class="section-title">Exclusions</span>
                    <span class="badge-optional">Optional</span>
                </div>
                <label class="field-label" for="exclusions">Patterns to Avoid</label>
                <p class="field-hint">Fields or patterns to explicitly avoid in generated data.</p>
                <textarea id="exclusions" style="min-height:80px;" placeholder="no real SSN patterns, no actual email domains"></textarea>
            </div>

            <!-- ACTION BUTTONS -->
            <div class="actions">
                <button type="button" class="btn-generate" onclick="generatePrompt()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                    Generate Prompt
                </button>
                <button type="button" class="btn-reset" onclick="resetForm()">Reset</button>
            </div>
        </form>

        <!-- OUTPUT PANEL -->
        <div class="output-panel" id="outputPanel">
            <div class="output-panel-inner">
                <div class="output-header">
                    <span class="output-title">&#9654; Generated Prompt &mdash; Ready to Paste</span>
                    <button type="button" class="btn-copy" id="copyBtn" onclick="copyOutput()">Copy</button>
                </div>
                <div class="output-body">
                    <pre id="outputPre"></pre>
                </div>
            </div>
        </div>

        <!-- FOOTER -->
        <footer>
            <span>Built with PromptForge</span>
            <span>Author: Tim Wolfe &mdash; <a href="https://github.com/rtwolfe" target="_blank" rel="noopener">GitHub</a> &middot; <a href="https://t.me/timwolfe" target="_blank" rel="noopener">Telegram</a></span>
        </footer>

    </div>

    <script>
        function generatePrompt() {
            var schema = document.getElementById('schema').value.trim();
            var formatEl = document.querySelector('input[name="outputFormat"]:checked');
            var valid = true;

            // Validate required: schema
            if (!schema) {
                flashError(document.getElementById('schema'));
                valid = false;
            }

            // Validate required: output format
            if (!formatEl) {
                document.querySelectorAll('.radio-option label').forEach(function(l) {
                    l.style.borderColor = 'var(--danger)';
                    setTimeout(function() { l.style.borderColor = ''; }, 2000);
                });
                valid = false;
            }

            if (!valid) return;

            var outputFormat = formatEl.value;
            var volume = document.getElementById('volume').value.trim();
            var domain = document.getElementById('domain').value;
            var edgeCase = document.querySelector('input[name="edgeCase"]:checked').value;
            var locale = document.getElementById('locale').value;
            var seedConstraints = document.getElementById('seedConstraints').value.trim();
            var detSeed = document.getElementById('detSeed').value.trim();
            var exclusions = document.getElementById('exclusions').value.trim();

            // Build prompt
            var lines = [];

            lines.push('You are SynthForge, a synthetic test data generation engine. You take database schemas, API contracts, or data model descriptions as input and produce privacy-safe, referentially intact synthetic datasets. You are methodical: you always analyze the schema, publish a generation plan, produce the data, and validate the output before delivering. You never generate data that violates declared constraints, contains real PII, or breaks referential integrity.');
            lines.push('');
            lines.push('---');
            lines.push('');
            lines.push('**Schema:**');
            lines.push('```');
            lines.push(schema);
            lines.push('```');
            lines.push('');
            lines.push('**Output Format:** ' + outputFormat);
            lines.push('**Volume:** ' + (volume || '10 per table (default)'));
            lines.push('**Domain Context:** ' + domain);
            lines.push('**Edge Case Profile:** ' + edgeCase);
            lines.push('**Locale:** ' + locale);

            if (seedConstraints) {
                lines.push('**Seed Constraints:** ' + seedConstraints);
            }
            if (detSeed) {
                lines.push('**Deterministic Seed:** ' + detSeed);
            }
            if (exclusions) {
                lines.push('**Exclusions:** ' + exclusions);
            }

            lines.push('');
            lines.push('---');
            lines.push('');
            lines.push('**Instructions:**');
            lines.push('');
            lines.push('Respond with exactly these sections in this order:');
            lines.push('');
            lines.push('## 1. Schema Analysis');
            lines.push('Summarize parsed schema \u2014 tables, columns, types, constraints, foreign keys, assumptions.');
            lines.push('');
            lines.push('## 2. Generation Plan');
            lines.push('Declare record counts, cardinalities, edge case plan, domain patterns, seed constraint fulfillment.');
            lines.push('');
            lines.push('## 3. Generated Data');
            lines.push('Produce the complete dataset in the requested format with all constraints satisfied and edge cases annotated.');
            lines.push('');
            lines.push('## 4. Validation Summary');
            lines.push('Report record counts, referential integrity verification, constraint compliance, edge cases injected, seed constraint verification.');
            lines.push('');
            lines.push('---');
            lines.push('');
            lines.push('**Hard rules:**');
            lines.push('- Never generate real PII \u2014 no real email addresses, valid phone numbers, real SSN patterns, or actual mailing addresses');
            lines.push('- Never violate declared schema constraints \u2014 edge cases test boundaries within constraints, not outside them');
            lines.push('- Never fabricate the validation summary \u2014 every count and assertion must reflect actual generated data');
            lines.push('- Never generate without a plan \u2014 Schema Analysis and Generation Plan must precede Generated Data');
            lines.push('- Never produce partial datasets \u2014 generate every requested record or negotiate smaller volume upfront');
            lines.push('- Never use sequential or patterned data \u2014 every field must exhibit realistic variance');
            lines.push('- Never include actual product names, brand names, or copyrighted content');

            var prompt = lines.join('\n');

            // Show output panel
            var panel = document.getElementById('outputPanel');
            var pre = document.getElementById('outputPre');
            pre.textContent = prompt;
            panel.classList.add('visible');
            panel.scrollIntoView({ behavior: 'smooth', block: 'start' });

            // Reset copy button
            var copyBtn = document.getElementById('copyBtn');
            copyBtn.textContent = 'Copy';
            copyBtn.classList.remove('copied');
        }

        function flashError(el) {
            el.classList.add('field-error-flash');
            setTimeout(function() {
                el.classList.remove('field-error-flash');
            }, 2000);
            el.focus();
        }

        function copyOutput() {
            var pre = document.getElementById('outputPre');
            var text = pre.textContent;
            var copyBtn = document.getElementById('copyBtn');

            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(function() {
                    copyBtn.textContent = 'Copied \u2713';
                    copyBtn.classList.add('copied');
                    setTimeout(function() {
                        copyBtn.textContent = 'Copy';
                        copyBtn.classList.remove('copied');
                    }, 2000);
                }).catch(function() {
                    fallbackCopy(text, copyBtn);
                });
            } else {
                fallbackCopy(text, copyBtn);
            }
        }

        function fallbackCopy(text, copyBtn) {
            var ta = document.createElement('textarea');
            ta.value = text;
            ta.style.position = 'fixed';
            ta.style.left = '-9999px';
            document.body.appendChild(ta);
            ta.select();
            try {
                document.execCommand('copy');
                copyBtn.textContent = 'Copied \u2713';
                copyBtn.classList.add('copied');
                setTimeout(function() {
                    copyBtn.textContent = 'Copy';
                    copyBtn.classList.remove('copied');
                }, 2000);
            } catch (e) {
                copyBtn.textContent = 'Failed';
                setTimeout(function() { copyBtn.textContent = 'Copy'; }, 2000);
            }
            document.body.removeChild(ta);
        }

        function resetForm() {
            document.getElementById('schema').value = '';
            document.getElementById('fmt-sql').checked = true;
            document.getElementById('volume').value = '';
            document.getElementById('domain').value = 'general';
            document.getElementById('edge-moderate').checked = true;
            document.getElementById('locale').value = 'en-US';
            document.getElementById('seedConstraints').value = '';
            document.getElementById('detSeed').value = '';
            document.getElementById('exclusions').value = '';

            var panel = document.getElementById('outputPanel');
            panel.classList.remove('visible');

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>
